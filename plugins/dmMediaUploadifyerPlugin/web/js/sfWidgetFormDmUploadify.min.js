(function(a){__set_up_uploadify_widget=function(c){var b=c.parents("form"),d=c.parent().clone().attr("id","a-new-and-unique-id"),e=c.metadata({type:"html5"}),f=b.attr("action").replace("+","%2B");d.children().remove("input, label");c.parent().after(d.append(a("<label/>",{"for":"fileQueue",text:"Upload Queue"})).append(a("<div/>",{id:"fileQueue",text:"",css:{"max-height":"350px",overflow:"auto",width:"70%","float":"right"}})));c.uploadify({uploader:dm_configuration.relative_url_root+"/dmMediaUploadifyerPlugin/swf/uploadify.swf",script:f,cancelImg:dm_configuration.relative_url_root+"/dmMediaUploadifyerPlugin/images/cancel.png",queueID:"fileQueue",simUploadLimit:3,fileDataName:c.attr("name"),auto:false,multi:true,onAllComplete:function(j,g,i,h,k){c.closest("div.ui-dialog-content").dialog("close");a("#dm_admin_content").block();window.location.reload()},onProgress:function(i,g,h,j){b.find(":submit,input:image").attr("value","Uploading files...").text("Uploading files...");return true},onError:function(j,g,i,h){b.find(":submit,input:image").attr("value","Error uploading!").text("Error uploading!");return true}});b.bind("submit",function(g){c.uploadifySettings("scriptData",a.extend({uploadify_session_name:e.session_name,uploadify_session_id:e.session_id},__get_form_fields_as_object(b)));c.uploadifyUpload();return false})};__get_form_fields_as_object=function(b){fields=b.serializeArray();result={};a.each(fields,function(c,d){if(""!==d.value){result[d.name]=d.value}});return result};a(document).ready(function(){__set_up_uploadify_widget(a("input.uploadify_file_field"))})})(jQuery);